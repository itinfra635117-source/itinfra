<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Service Request</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        main {
            flex: 1 0 auto;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50 flex flex-col items-center justify-center px-4">
    <div class="max-w-2xl w-full bg-white rounded-xl shadow-lg p-4 sm:p-6 lg:p-8 mt-4 sm:mt-8">
    <h2 class="text-xl sm:text-2xl font-bold text-blue-800 mb-4 sm:mb-6 text-center">Service Request Details</h2>
        
        <!-- Mobile-optimized table -->
        <div class="overflow-x-auto">
            <table class="min-w-full text-sm sm:text-base">
                <tbody class="space-y-2">
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">ID:</td><td class="py-2">{{ req.id }}</td></tr>
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Created At:</td><td class="py-2">{{ req.created_at }}</td></tr>
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Institution:</td><td class="py-2">{{ req.institution }}</td></tr>
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Type:</td><td class="py-2">{{ req.type }}</td></tr>
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Name:</td><td class="py-2">{{ req.name }}</td></tr>
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Department:</td><td class="py-2">{{ req.department }}</td></tr>
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Email:</td><td class="py-2 break-all">{{ req.email }}</td></tr>
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Mobile:</td><td class="py-2">{{ req.mobile }}</td></tr>
                    {% if req.system_issues is defined %}
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">System Issues:</td><td class="py-2">{{ req.system_issues | join(', ') }}</td></tr>
                    {% endif %}
                    {% if req.printer_model is defined %}
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Printer Model:</td><td class="py-2">{{ req.printer_model | join(', ') }}</td></tr>
                    {% endif %}
                    {% if req.printer_service is defined %}
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Printer Service:</td><td class="py-2">{{ req.printer_service }}</td></tr>
                    {% endif %}
                    {% if req.network_service is defined %}
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Network Service:</td><td class="py-2">{{ req.network_service }}</td></tr>
                    {% endif %}
                    {% if req.projector_issues is defined %}
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Projector Issues:</td><td class="py-2">{{ req.projector_issues | join(', ') }}</td></tr>
                    {% endif %}
                    {% if req.other_service is defined %}
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Other Service:</td><td class="py-2">{{ req.other_service }}</td></tr>
                    {% endif %}
                    <tr class="border-b border-gray-200">
                        <td class="font-bold py-2 pr-4 text-blue-700">Status:</td>
                        <td class="py-2">
                            {% set status = req.status if req.status else 'pending' %}
                            <span class="px-2 py-1 rounded-full text-xs font-semibold
                                {% if status == 'resolved' %}bg-green-100 text-green-800
                                {% elif status == 'in_progress' %}bg-blue-100 text-blue-800
                                {% elif status == 'pending' %}bg-yellow-100 text-yellow-800
                                {% else %}bg-gray-100 text-gray-800{% endif %}">
                                {{ status|capitalize }}
                            </span>
                        </td>
                    </tr>
                    <tr class="border-b border-gray-200">
                        <td class="font-bold py-2 pr-4 text-blue-700">Date:</td>
                        <td class="py-2">
                            {% if req.status == 'resolved' and req.date %}
                                <span class="font-semibold text-green-700">Resolved on: {{ req.date }}</span>
                            {% elif req.date %}
                                {{ req.date }}
                            {% elif req.created_at %}
                                {{ req.created_at[:10] }}
                            {% else %}-{% endif %}
                        </td>
                    </tr>
                    <tr class="border-b border-gray-200"><td class="font-bold py-2 pr-4 text-blue-700">Image:</td><td class="py-2">{% if req.image_url %}<img src="{{ req.image_url }}" alt="Issue Image" class="max-w-full sm:max-w-xs rounded border">{% else %}-{% endif %}</td></tr>
                </tbody>
            </table>
        </div>
        
        <div class="mt-4 sm:mt-6 text-center">
            <a href="/admin_dashboard" class="bg-blue-800 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-xl shadow hover:bg-blue-900 transition-colors text-sm sm:text-base">
                <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
            </a>
        </div>
    </div>
    <main>
    </main>
    <!-- Footer Start -->
    <footer class="bottom-0 left-0 right-0 py-1" style="z-index:50;display:flex;justify-content:center;align-items:center;">
        <div style="max-width:700px;width:100vw;margin:0 auto;padding:0 16px;">
            <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;width:100%;">
                <p style="margin-bottom:2px;font-size:13px;color:#383839;font-weight:500;"> </p>
                <div style="display:flex;align-items:center;justify-content:center;gap:8px;">
                    <span style="font-size:12px;color:#464444;opacity:0.85;">Powered by</span>
                    <a href="https://zeonytechnologies.com" target="_blank" rel="noopener noreferrer" style="display:inline-block;transition:all 0.3s;">
                        <img src="img/zeony logo1 copy.png" alt="Zeony Technologies" style="height:30px;width:auto;object-fit:contain;vertical-align:middle;filter:brightness(0.95);">
                    </a>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer End -->
</body>
</html>
